(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))c(r);new MutationObserver(r=>{for(const e of r)if(e.type==="childList")for(const o of e.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&c(o)}).observe(document,{childList:!0,subtree:!0});function s(r){const e={};return r.integrity&&(e.integrity=r.integrity),r.referrerPolicy&&(e.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?e.credentials="include":r.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function c(r){if(r.ep)return;r.ep=!0;const e=s(r);fetch(r.href,e)}})();const m=async()=>{try{const t=await fetch("./data/countries.json");if(!t.ok)throw new Error(`Failed to fetch countries (${t.status}): ${t.statusText}`);return await t.json()}catch(t){return console.error("Error fetching countries:",t),[]}};async function y(){const t=document.getElementById("country-from"),n=document.getElementById("country-to"),s=document.getElementById("select-country-to-dropdown"),c=document.getElementById("select-country-from-dropdown");try{const r=await m();if(!r||r.length===0){console.error("Failed to load countries data");return}r.forEach(e=>{const o=document.createElement("li"),a=document.createElement("li");o.innerHTML=`
          <p>${e.name} <span>${e.currency}</span></p>
          <img src="./images/${e.flag}.png" alt="${e.name} Flag"/>
      `,a.innerHTML=`
          <p>${e.name} <span>${e.currency}</span></p>
          <img src="./images/${e.flag}.png" alt="${e.name} Flag"/>
      `,a.classList.add("drop-down-li-item"),o.classList.add("drop-down-li-item"),a.addEventListener("click",()=>{t.querySelector(".place-holder").innerHTML=`
      <div class="place-holder-div">
        ${e.name} ${e.currency}<img src="./images/${e.flag}.png" alt="${e.name} Flag" />
      </div>
    `,c.classList.remove("visible")}),o.addEventListener("click",()=>{n.querySelector(".place-holder").innerHTML=`
      <div class="place-holder-div">
        ${e.name} ${e.currency}<img src="./images/${e.flag}.png" alt="${e.name} Flag" />
      </div>
    `,s.classList.remove("visible")}),s.appendChild(o),c.appendChild(a)}),t.addEventListener("click",()=>{c.classList.toggle("visible")}),n.addEventListener("click",()=>{s.classList.toggle("visible")}),document.addEventListener("click",e=>{t.contains(e.target)||c.classList.remove("visible"),n.contains(e.target)||s.classList.remove("visible")})}catch(r){console.error("Error initializing dropdown:",r)}}function f(){const t=document.querySelectorAll(".place-holder"),n=Array.from(t).map(r=>{console.log(r.textContent.trim());const e=r.textContent.trim(),o=e.split(" "),a=o.pop(),l=o.join(" ");return e==="Select a country"?{countryName:void 0,currency:void 0}:{countryName:l,currency:a}}),s=document.getElementById("amount").value,c=document.getElementById("date-selector").value;return{placeHolderArray:n,amount:s,date:c}}const u="https://api.currencyfreaks.com/v2.0/rates/",d="572d0fcf21e5400ca5b703c69df927d6",p=async t=>{if(!t.placeHolderArray||t.placeHolderArray.length<2)return console.error("Invalid input data: Missing currency information."),null;const n=t.placeHolderArray[0].currency,s=t.placeHolderArray[1].currency,c=t.date;if(!n||!s)return console.error("Invalid input data: Missing currency codes."),null;const r=`${n},${s}`,e=c===new Date().toISOString().split("T")[0]?"latest":`historical?date=${c}`;let o=`${u}${e}?apikey=${d}&symbols=${r}`;e!=="latest"&&(o=`${u}${e}&apikey=${d}&symbols=${r}`);try{const a=await fetch(o);if(!a.ok)throw new Error(`HTTP error! Status: ${a.status}`);const l=await a.json();return l.error?(console.error("Error:",l.error.message),null):l}catch(a){return console.error(a.message||"Something went wrong, Internal server error 5000"),null}},g=(t,n)=>{if(!t||!t.rates){console.error("No exchange rate data available"),document.querySelector(".result-div").textContent="Exchange rate data not available";return}const s=n.placeHolderArray[0].currency,c=n.placeHolderArray[1].currency,r=parseFloat(n.amount);if(isNaN(r)){document.querySelector(".result-div").textContent="Please enter a valid number";return}const e=parseFloat(t.rates[s]),o=parseFloat(t.rates[c]);if(!e||!o||isNaN(e)||isNaN(o)){document.querySelector(".result-div").textContent="Exchange rate not available for the selected currencies";return}const a=r/e*o;document.querySelector(".result-div").textContent=`${r} ${s} = ${a.toFixed(3)} ${c}`},v=async()=>{const n=new Date().toISOString().split("T")[0];document.getElementById("date-selector").max=n,document.getElementById("date-selector").value=n,await y()};v();const i=document.getElementById("convert");i.addEventListener("click",async()=>{const t=f();if(!t.date){alert("Please select a date");return}if(t.placeHolderArray[0].countryName===void 0||t.placeHolderArray[1].countryName===void 0||t.placeHolderArray[0].currency===void 0||t.placeHolderArray[1].currency===void 0){alert("Please select both countries");return}document.querySelector(".result-div").textContent="Loading...",i.disabled=!0,i.classList.add("disabled");try{const n=await p(t);n?g(n,t):document.querySelector(".result-div").textContent="Failed to fetch exchange rates. Please try again."}catch(n){console.error("Error in conversion process:",n),document.querySelector(".result-div").textContent="An error occurred during conversion."}finally{i.disabled=!1,i.classList.remove("disabled")}});
